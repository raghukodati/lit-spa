class o{constructor(i={}){this.id=i.id||null,this.name=i.name||"",this.code=i.code||"",this.description=i.description||"",this.status=i.status||"active",this.type=i.type||"custom",this.currency=i.currency||"USD",this.priceModifier=i.priceModifier||"fixed",this.modifierValue=i.modifierValue||0,this.items=i.items||[],this.volumeTiers=i.volumeTiers||[],this.assignedCompanies=i.assignedCompanies||[],this.assignedCategories=i.assignedCategories||[],this.assignedProducts=i.assignedProducts||[],this.validFrom=i.validFrom||null,this.validTo=i.validTo||null,this.priority=i.priority||0,this.minimumOrderQty=i.minimumOrderQty||0,this.minimumOrderAmount=i.minimumOrderAmount||0,this.notes=i.notes||"",this.tags=i.tags||[],this.createdAt=i.createdAt||null,this.updatedAt=i.updatedAt||null,this.createdBy=i.createdBy||null}get isActive(){if(this.status!=="active")return!1;const i=new Date;return!(this.validFrom&&new Date(this.validFrom)>i||this.validTo&&new Date(this.validTo)<i)}getPrice(i,t,e){const s=this.items.find(n=>n.productId===i);if(s)return s.minQty&&t<s.minQty||s.maxQty&&t>s.maxQty?e:s.price;const r=this.volumeTiers.find(n=>t>=(n.minQty||0)&&(!n.maxQty||t<=n.maxQty));if(r){if(this.priceModifier==="fixed")return r.price;if(this.priceModifier==="percentage")return e*(1-r.discount/100);if(this.priceModifier==="discount")return e-r.discount}switch(this.priceModifier){case"fixed":return this.modifierValue;case"percentage":return e*(1-this.modifierValue/100);case"markup":return e*(1+this.modifierValue/100);case"discount":return e-this.modifierValue;default:return e}}addItem(i,t,e,s=null,r=null){this.items.push({productId:i,sku:t,price:e,minQty:s,maxQty:r})}removeItem(i){this.items=this.items.filter(t=>t.productId!==i)}addVolumeTier(i,t,e){this.volumeTiers.push({minQty:i,maxQty:t,[this.priceModifier==="fixed"?"price":"discount"]:e}),this.volumeTiers.sort((s,r)=>s.minQty-r.minQty)}validate(){const i=[];return(!this.name||this.name.trim()==="")&&i.push("Price list name is required"),(!this.code||this.code.trim()==="")&&i.push("Price list code is required"),this.validFrom&&this.validTo&&new Date(this.validFrom)>new Date(this.validTo)&&i.push("Valid from date must be before valid to date"),this.modifierValue<0&&i.push("Modifier value cannot be negative"),{isValid:i.length===0,errors:i}}toJSON(){return{...this}}static fromAPI(i){return new o(i)}}export{o as P};
