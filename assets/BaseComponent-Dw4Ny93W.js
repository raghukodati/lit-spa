import{j as a,k as c,m as o,o as u,n as h,a0 as l,a1 as x,a2 as p,a3 as m,a4 as C,T as _}from"./index-DZz2m7sH.js";const d=r=>class extends r{can(e,t,s=null){return a(e,t,s)}cannot(e,t,s=null){return!this.can(e,t,s)}canAny(e,t){return c(e,t)}canAll(e,t){return o(e,t)}isAdmin(){return u()}canAccessRoute(e){return h(e)}ifCan(e,t,s,n=null){return this.can(e,t)?s:n||""}ifAdmin(e,t=null){return this.isAdmin()?e:t||""}permClass(e,t,s,n=""){return this.can(e,t)?s:n}checkPerms(e){const t={};return Object.entries(e).forEach(([s,[n,i]])=>{t[s]=this.can(n,i)}),t}},g=C(d(_));class V extends g{constructor(){super(),this._services=new Map,this._contextValues={}}async getService(e){if(this._services.has(e))return this._services.get(e);try{const t=await l.get(e);return this._services.set(e,t),t}catch(t){throw console.error(`BaseComponent: Failed to get service "${e}"`,t),t}}async getServices(e){const t={};return await Promise.all(e.map(async s=>{t[s]=await this.getService(s)})),t}clearServiceCache(){this._services.clear()}get userContext(){return this._contextValues.user||(this._contextValues.user=this.consumeContext(x,e=>{this._contextValues.user=e})),this._contextValues.user}get permissionContext(){return this._contextValues.permission||(this._contextValues.permission=this.consumeContext(p,e=>{this._contextValues.permission=e})),this._contextValues.permission}get appContext(){return this._contextValues.app||(this._contextValues.app=this.consumeContext(m,e=>{this._contextValues.app=e})),this._contextValues.app}get currentUser(){return this.userContext?.user}get isAuthenticated(){return this.userContext?.isAuthenticated||!1}get theme(){return this.appContext?.theme||"light"}disconnectedCallback(){super.disconnectedCallback()}}export{V as B};
