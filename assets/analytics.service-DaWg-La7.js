import{P as s}from"./index-D7HSGHDh.js";class u{constructor(e={}){this.id=e.id||null,this.year=e.year||new Date().getFullYear(),this.month=e.month||new Date().getMonth()+1,this.customer=e.customer||"",this.revenue=e.revenue||0,this.cost=e.cost||0,this.profit=e.profit||0,this.notes=e.notes||"",this.status=e.status||"Draft",this.createdBy=e.createdBy||"",this.createdAt=e.createdAt||new Date().toISOString(),this.updatedAt=e.updatedAt||new Date().toISOString()}validate(){const e=[];return(!this.year||this.year<2e3)&&e.push("Valid year is required"),(!this.month||this.month<1||this.month>12)&&e.push("Valid month is required (1-12)"),(!this.customer||this.customer.trim()==="")&&e.push("Customer is required"),this.revenue<0&&e.push("Revenue cannot be negative"),{isValid:e.length===0,errors:e}}calculateProfit(){return this.profit=this.revenue-this.cost,this.profit}toJSON(){return{id:this.id,year:this.year,month:this.month,customer:this.customer,revenue:this.revenue,cost:this.cost,profit:this.profit,notes:this.notes,status:this.status,createdBy:this.createdBy,createdAt:this.createdAt,updatedAt:this.updatedAt}}static fromAPI(e){return new u(e)}}const h=[{month:"Jan 2024",sales:45200,target:5e4},{month:"Feb 2024",sales:52300,target:5e4},{month:"Mar 2024",sales:48900,target:5e4},{month:"Apr 2024",sales:61500,target:55e3},{month:"May 2024",sales:58700,target:55e3},{month:"Jun 2024",sales:67200,target:6e4},{month:"Jul 2024",sales:71800,target:65e3},{month:"Aug 2024",sales:69300,target:65e3},{month:"Sep 2024",sales:74500,target:7e4},{month:"Oct 2024",sales:78900,target:75e3}],d=[{customer:"Acme Corp",sales:125600,orders:45},{customer:"TechStart Inc",sales:98700,orders:32},{customer:"Global Systems",sales:87400,orders:28},{customer:"Innovate Ltd",sales:76200,orders:25},{customer:"FutureTech",sales:65800,orders:22},{customer:"Digital Dynamics",sales:54300,orders:18},{customer:"Smart Solutions",sales:43700,orders:15},{customer:"Alpha Industries",sales:38900,orders:12}],i=[{id:1,customer:"Acme Corp",month:"Nov 2024",forecastValue:13500,actualRevenue:0,performance:0,status:"Pending"},{id:2,customer:"Acme Corp",month:"Oct 2024",forecastValue:12800,actualRevenue:13200,performance:103.1,status:"Exceeded"},{id:3,customer:"Acme Corp",month:"Sep 2024",forecastValue:12e3,actualRevenue:11800,performance:98.3,status:"Met"},{id:4,customer:"TechStart Inc",month:"Nov 2024",forecastValue:10500,actualRevenue:0,performance:0,status:"Pending"},{id:5,customer:"TechStart Inc",month:"Oct 2024",forecastValue:10200,actualRevenue:10800,performance:105.9,status:"Exceeded"},{id:6,customer:"TechStart Inc",month:"Sep 2024",forecastValue:9800,actualRevenue:9500,performance:96.9,status:"Below"},{id:7,customer:"Global Systems",month:"Nov 2024",forecastValue:9200,actualRevenue:0,performance:0,status:"Pending"},{id:8,customer:"Global Systems",month:"Oct 2024",forecastValue:8900,actualRevenue:9100,performance:102.2,status:"Exceeded"},{id:9,customer:"Global Systems",month:"Sep 2024",forecastValue:8500,actualRevenue:8400,performance:98.8,status:"Met"},{id:10,customer:"Innovate Ltd",month:"Nov 2024",forecastValue:8100,actualRevenue:0,performance:0,status:"Pending"},{id:11,customer:"Innovate Ltd",month:"Oct 2024",forecastValue:7800,actualRevenue:8200,performance:105.1,status:"Exceeded"},{id:12,customer:"Innovate Ltd",month:"Sep 2024",forecastValue:7500,actualRevenue:7200,performance:96,status:"Below"}];async function V(){return await s(200),[...h]}async function v(){return await s(200),[...d]}async function N(t={}){await s(200);let e=[...i];return t.customer&&(e=e.filter(r=>r.customer===t.customer)),t.month&&(e=e.filter(r=>r.month===t.month)),t.status&&(e=e.filter(r=>r.status===t.status)),e}function b(){return[...new Set(i.map(t=>t.customer))]}function w(){return[...new Set(i.map(t=>t.month))]}function P(){return["2024","2025"]}function F(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}function A(){return[...new Set(i.map(t=>t.customer))].sort()}let m=[{id:1,customerName:"Acme Corp",year:"2024",month:"January",forecastValue:125e3,commissionPercent:8.5,commissionDollar:10625,createdDate:"2024-01-05"},{id:2,customerName:"Acme Corp",year:"2024",month:"February",forecastValue:132e3,commissionPercent:8.5,commissionDollar:11220,createdDate:"2024-02-05"},{id:3,customerName:"TechStart Inc",year:"2024",month:"January",forecastValue:98e3,commissionPercent:7.5,commissionDollar:7350,createdDate:"2024-01-05"},{id:4,customerName:"TechStart Inc",year:"2024",month:"February",forecastValue:105e3,commissionPercent:7.5,commissionDollar:7875,createdDate:"2024-02-05"},{id:5,customerName:"Global Systems",year:"2024",month:"January",forecastValue:87e3,commissionPercent:7,commissionDollar:6090,createdDate:"2024-01-05"},{id:6,customerName:"Global Systems",year:"2024",month:"February",forecastValue:92e3,commissionPercent:7,commissionDollar:6440,createdDate:"2024-02-05"},{id:7,customerName:"Innovate Ltd",year:"2024",month:"January",forecastValue:76e3,commissionPercent:6.5,commissionDollar:4940,createdDate:"2024-01-05"},{id:8,customerName:"Innovate Ltd",year:"2024",month:"February",forecastValue:81e3,commissionPercent:6.5,commissionDollar:5265,createdDate:"2024-02-05"},{id:9,customerName:"FutureTech",year:"2024",month:"January",forecastValue:65e3,commissionPercent:6,commissionDollar:3900,createdDate:"2024-01-05"},{id:10,customerName:"FutureTech",year:"2024",month:"February",forecastValue:7e4,commissionPercent:6,commissionDollar:4200,createdDate:"2024-02-05"},{id:11,customerName:"Digital Dynamics",year:"2024",month:"January",forecastValue:54e3,commissionPercent:5.5,commissionDollar:2970,createdDate:"2024-01-05"},{id:12,customerName:"Digital Dynamics",year:"2024",month:"February",forecastValue:58e3,commissionPercent:5.5,commissionDollar:3190,createdDate:"2024-02-05"},{id:13,customerName:"Smart Solutions",year:"2024",month:"January",forecastValue:43e3,commissionPercent:5,commissionDollar:2150,createdDate:"2024-01-05"},{id:14,customerName:"Smart Solutions",year:"2024",month:"February",forecastValue:47e3,commissionPercent:5,commissionDollar:2350,createdDate:"2024-02-05"},{id:15,customerName:"Alpha Industries",year:"2024",month:"January",forecastValue:38e3,commissionPercent:4.5,commissionDollar:1710,createdDate:"2024-01-05"},{id:16,customerName:"Alpha Industries",year:"2024",month:"February",forecastValue:42e3,commissionPercent:4.5,commissionDollar:1890,createdDate:"2024-02-05"},{id:17,customerName:"Acme Corp",year:"2024",month:"March",forecastValue:138e3,commissionPercent:8.5,commissionDollar:11730,createdDate:"2024-03-05"},{id:18,customerName:"TechStart Inc",year:"2024",month:"March",forecastValue:11e4,commissionPercent:7.5,commissionDollar:8250,createdDate:"2024-03-05"},{id:19,customerName:"Global Systems",year:"2024",month:"March",forecastValue:95e3,commissionPercent:7,commissionDollar:6650,createdDate:"2024-03-05"},{id:20,customerName:"Innovate Ltd",year:"2024",month:"March",forecastValue:84e3,commissionPercent:6.5,commissionDollar:5460,createdDate:"2024-03-05"}],f=21;async function I(t={}){await s(300);let e=[...m];if(t.search){const a=t.search.toLowerCase();e=e.filter(o=>o.customerName.toLowerCase().includes(a)||o.year.includes(a)||o.month.toLowerCase().includes(a))}t.customerName&&(e=e.filter(a=>a.customerName===t.customerName)),t.year&&(e=e.filter(a=>a.year===t.year)),t.month&&(e=e.filter(a=>a.month===t.month)),t.sortBy&&e.sort((a,o)=>{let n=a[t.sortBy],c=o[t.sortBy];return typeof n=="string"&&(n=n.toLowerCase(),c=c.toLowerCase()),t.sortOrder==="desc"?n<c?1:n>c?-1:0:n>c?1:n<c?-1:0});const r=e.length;if(t.page&&t.pageSize){const a=(t.page-1)*t.pageSize,o=a+t.pageSize;e=e.slice(a,o)}return{data:e,total:r,page:t.page||1,pageSize:t.pageSize||r,totalPages:t.pageSize?Math.ceil(r/t.pageSize):1}}async function y(t){return await s(200),m.find(e=>e.id===parseInt(t))||null}async function D(t){await s(300);const e={id:f++,...t,commissionDollar:t.forecastValue*t.commissionPercent/100,createdDate:new Date().toISOString().split("T")[0]};return m.push(e),e}async function g(t,e){await s(300);const r=m.find(a=>a.id===t);return r?(Object.assign(r,e),(e.forecastValue!==void 0||e.commissionPercent!==void 0)&&(r.commissionDollar=r.forecastValue*r.commissionPercent/100),r):null}async function J(t){await s(300);const e=m.findIndex(r=>r.id===t);return e!==-1?(m.splice(e,1),!0):!1}async function C(t){const e=await y(t);return e?new u({id:e.id,year:parseInt(e.year),month:p(e.month),customer:e.customerName,revenue:e.forecastValue,cost:0,notes:"",status:"Draft"}):null}async function L(t){const e=t.validate();if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);t.calculateProfit();const r={customerName:t.customer,year:t.year.toString(),month:l(t.month),forecastValue:t.revenue,commissionPercent:7};return await D(r)}async function M(t,e){const r=e.validate();if(!r.isValid)throw new Error(`Validation failed: ${r.errors.join(", ")}`);e.calculateProfit();const a={customerName:e.customer,year:e.year.toString(),month:l(e.month),forecastValue:e.revenue};return await g(t,a)}function p(t){return["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(t)+1}function l(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t-1]||"January"}export{D as createForecast,L as createForecastModel,J as deleteForecast,b as getCustomerList,y as getForecastById,A as getForecastCustomers,N as getForecastData,C as getForecastModel,F as getForecastMonths,P as getForecastYears,I as getForecasts,w as getMonthList,v as getSalesByCustomer,V as getSalesByMonth,g as updateForecast,M as updateForecastModel};
