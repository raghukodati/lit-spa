import{P as a}from"./index-DeW_3Z4T.js";import{P as s}from"./pricelist.model-B2sEL8yC.js";let n=[{id:1,name:"Enterprise Tier Pricing",code:"ENT-001",description:"Volume pricing for enterprise customers",status:"active",type:"volume",currency:"USD",priceModifier:"percentage",modifierValue:15,items:[],volumeTiers:[{minQty:1,maxQty:99,discount:10},{minQty:100,maxQty:499,discount:15},{minQty:500,maxQty:null,discount:20}],assignedCompanies:[1],assignedCategories:[],assignedProducts:[],validFrom:"2024-01-01",validTo:"2024-12-31",priority:10,minimumOrderQty:0,minimumOrderAmount:0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:2,name:"Tech Startup Special",code:"TECH-001",description:"Special pricing for technology startups",status:"active",type:"custom",currency:"USD",priceModifier:"percentage",modifierValue:10,items:[{productId:1,sku:"PROD-001",price:249.99,minQty:1,maxQty:null},{productId:2,sku:"PROD-002",price:499.99,minQty:1,maxQty:null}],volumeTiers:[],assignedCompanies:[2],assignedCategories:[],assignedProducts:[1,2],validFrom:"2024-03-01",validTo:"2025-03-01",priority:5,minimumOrderQty:0,minimumOrderAmount:1e3,createdAt:"2024-03-01T00:00:00Z",updatedAt:"2024-03-01T00:00:00Z"}],m=3;async function p(i={}){await a(200);let e=[...n];if(i.status&&(e=e.filter(t=>t.status===i.status)),i.type&&(e=e.filter(t=>t.type===i.type)),i.companyId&&(e=e.filter(t=>t.assignedCompanies.includes(parseInt(i.companyId)))),i.search){const t=i.search.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.code.toLowerCase().includes(t))}return e.map(t=>s.fromAPI(t))}async function l(i){await a(200);const e=n.find(t=>t.id===parseInt(i));return e?s.fromAPI(e):null}async function w(i){await a(200);const e=n.find(t=>t.code===i);return e?s.fromAPI(e):null}async function f(i){await a(200);const e=n.filter(t=>t.assignedCompanies.includes(parseInt(i))&&t.status==="active");return e.sort((t,r)=>r.priority-t.priority),e.map(t=>s.fromAPI(t))}async function P(i){await a(300);const e=new s(i),t=e.validate();if(!t.isValid)throw new Error(`Validation failed: ${t.errors.join(", ")}`);const r={...e.toJSON(),id:m++,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(r),s.fromAPI(r)}async function y(i,e){await a(300);const t=n.findIndex(r=>r.id===parseInt(i));if(t===-1)throw new Error("Price list not found");return n[t]={...n[t],...e,updatedAt:new Date().toISOString()},s.fromAPI(n[t])}async function I(i){await a(300);const e=n.findIndex(t=>t.id===parseInt(i));if(e===-1)throw new Error("Price list not found");return n.splice(e,1),!0}async function g(i,e,t,r){await a(200);const o=await f(r);if(o.length===0)return t;const d=o[0];return d.isActive?d.getPrice(i,e,t):t}async function L(i,e){await a(200);const t=n.find(r=>r.id===parseInt(i));if(!t)throw new Error("Price list not found");return t.assignedCompanies.includes(e)||(t.assignedCompanies.push(e),t.updatedAt=new Date().toISOString()),s.fromAPI(t)}async function A(i,e){await a(200);const t=n.find(r=>r.id===parseInt(i));if(!t)throw new Error("Price list not found");return t.assignedCompanies=t.assignedCompanies.filter(r=>r!==e),t.updatedAt=new Date().toISOString(),s.fromAPI(t)}async function S(i,e,t,r,o=null,d=null){await a(200);const c=n.find(u=>u.id===parseInt(i));if(!c)throw new Error("Price list not found");return c.items=c.items.filter(u=>u.productId!==e),c.items.push({productId:e,sku:t,price:r,minQty:o,maxQty:d}),c.updatedAt=new Date().toISOString(),s.fromAPI(c)}async function C(i,e){await a(200);const t=n.find(r=>r.id===parseInt(i));if(!t)throw new Error("Price list not found");return t.items=t.items.filter(r=>r.productId!==e),t.updatedAt=new Date().toISOString(),s.fromAPI(t)}async function h(i,e,t,r){await a(200);const o=n.find(c=>c.id===parseInt(i));if(!o)throw new Error("Price list not found");const d=s.fromAPI(o);return d.addVolumeTier(e,t,r),o.volumeTiers=d.volumeTiers,o.updatedAt=new Date().toISOString(),s.fromAPI(o)}async function O(i){await a(300);const e=n.find(r=>r.id===parseInt(i));if(!e)throw new Error("Price list not found");const t={...e,id:m++,name:`${e.name} (Copy)`,code:`${e.code}-COPY-${m}`,status:"draft",assignedCompanies:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n.push(t),s.fromAPI(t)}const D={getPriceLists:p,getPriceListById:l,getPriceListByCode:w,getPriceListsForCompany:f,createPriceList:P,updatePriceList:y,deletePriceList:I,getPriceForProduct:g,assignPriceListToCompany:L,unassignPriceListFromCompany:A,addProductToPriceList:S,removeProductFromPriceList:C,addVolumeTier:h,duplicatePriceList:O};export{S as addProductToPriceList,h as addVolumeTier,L as assignPriceListToCompany,P as createPriceList,D as default,I as deletePriceList,O as duplicatePriceList,g as getPriceForProduct,w as getPriceListByCode,l as getPriceListById,p as getPriceLists,f as getPriceListsForCompany,C as removeProductFromPriceList,A as unassignPriceListFromCompany,y as updatePriceList};
