import{P as c}from"./index-YRTalx74.js";import{C as o}from"./contract.model-CkFP52sg.js";let a=[{id:1,contractNumber:"CNT-2024-001",name:"Annual Supply Agreement - Acme",type:"standard",companyId:1,companyName:"Acme Corporation",status:"active",startDate:"2024-01-01",endDate:"2024-12-31",autoRenew:!0,renewalPeriod:12,renewalNotice:30,totalValue:5e5,minimumCommitment:25e4,paymentTerms:"Net 30",currency:"USD",priceListId:1,discountPercent:15,volumeDiscount:!0,volumeTiers:[{minQty:1e3,discount:5},{minQty:5e3,discount:10},{minQty:1e4,discount:15}],creditLimit:1e5,paymentSchedule:"per_order",includedProducts:[],excludedProducts:[],serviceLevel:"premium",shippingTerms:"FOB",deliverySchedule:"As requested",allowBackorders:!0,minOrderQty:0,maxOrderQty:null,termsAndConditions:"Standard terms apply",slaTerms:"99.9% uptime guarantee",accountManagerId:1,accountManagerName:"Sarah Johnson",ordersPlaced:45,totalSpent:125e3,lastOrderDate:"2024-11-01",requiresApproval:!0,approvalStatus:"approved",approvedBy:[1],approvedAt:"2024-01-05T10:00:00Z",customerSignatory:"John Smith, VP Procurement",customerSignedDate:"2024-01-05T14:00:00Z",vendorSignatory:"Mary Wilson, Sales Director",vendorSignedDate:"2024-01-05T15:00:00Z",attachments:[],createdAt:"2023-12-15T00:00:00Z",updatedAt:"2024-11-01T00:00:00Z"},{id:2,contractNumber:"CNT-2024-002",name:"Master Service Agreement - TechStart",type:"master",companyId:2,companyName:"TechStart Inc",status:"active",startDate:"2024-03-01",endDate:"2025-03-01",autoRenew:!1,renewalPeriod:12,renewalNotice:60,totalValue:3e5,minimumCommitment:15e4,paymentTerms:"Net 60",currency:"USD",priceListId:2,discountPercent:10,volumeDiscount:!1,volumeTiers:[],creditLimit:5e4,paymentSchedule:"monthly",includedProducts:[1,2,3],excludedProducts:[],serviceLevel:"enterprise",shippingTerms:"CIF",deliverySchedule:"Monthly",allowBackorders:!1,minOrderQty:100,maxOrderQty:1e4,termsAndConditions:"Custom terms negotiated",slaTerms:"24/7 support included",accountManagerId:1,accountManagerName:"Sarah Johnson",ordersPlaced:12,totalSpent:78e3,lastOrderDate:"2024-10-28",requiresApproval:!0,approvalStatus:"approved",approvedBy:[1,2],approvedAt:"2024-03-05T10:00:00Z",customerSignatory:"Jane Doe, CEO",customerSignedDate:"2024-03-05T16:00:00Z",vendorSignatory:"Robert Brown, VP Sales",vendorSignedDate:"2024-03-05T17:00:00Z",attachments:[],createdAt:"2024-02-20T00:00:00Z",updatedAt:"2024-10-28T00:00:00Z"}],s=3;async function u(e={}){await c(200);let n=[...a];if(e.status&&(n=n.filter(t=>t.status===e.status)),e.companyId&&(n=n.filter(t=>t.companyId===parseInt(e.companyId))),e.type&&(n=n.filter(t=>t.type===e.type)),e.accountManagerId&&(n=n.filter(t=>t.accountManagerId===parseInt(e.accountManagerId))),e.expiringSoon&&(n=n.filter(t=>o.fromAPI(t).isExpiringSoon)),e.search){const t=e.search.toLowerCase();n=n.filter(r=>r.contractNumber.toLowerCase().includes(t)||r.name.toLowerCase().includes(t)||r.companyName.toLowerCase().includes(t))}return n.map(t=>o.fromAPI(t))}async function l(e){await c(200);const n=a.find(t=>t.id===parseInt(e));return n?o.fromAPI(n):null}async function m(e){await c(200);const n=a.find(t=>t.contractNumber===e);return n?o.fromAPI(n):null}async function p(e){return await c(200),a.filter(t=>t.companyId===parseInt(e)).map(t=>o.fromAPI(t))}async function f(e){await c(200);const n=a.find(t=>t.companyId===parseInt(e)&&t.status==="active");return n?o.fromAPI(n):null}async function S(e){await c(300);const n=new o(e),t=n.validate();if(!t.isValid)throw new Error(`Validation failed: ${t.errors.join(", ")}`);if(!n.contractNumber){const i=new Date().getFullYear();n.contractNumber=`CNT-${i}-${String(s).padStart(3,"0")}`}const r={...n.toJSON(),id:s++,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.push(r),o.fromAPI(r)}async function w(e,n){await c(300);const t=a.findIndex(r=>r.id===parseInt(e));if(t===-1)throw new Error("Contract not found");return a[t]={...a[t],...n,updatedAt:new Date().toISOString()},o.fromAPI(a[t])}async function y(e){await c(300);const n=a.findIndex(t=>t.id===parseInt(e));if(n===-1)throw new Error("Contract not found");return a.splice(n,1),!0}async function g(e,n){await c(300);const t=a.find(r=>r.id===parseInt(e));if(!t)throw new Error("Contract not found");return t.approvedBy.includes(n)||t.approvedBy.push(n),t.approvalStatus="approved",t.approvedAt=new Date().toISOString(),t.updatedAt=new Date().toISOString(),o.fromAPI(t)}async function I(e,n){await c(300);const t=a.find(r=>r.id===parseInt(e));if(!t)throw new Error("Contract not found");return t.approvalStatus="rejected",t.notes=`${t.notes}
Rejection: ${n}`,t.updatedAt=new Date().toISOString(),o.fromAPI(t)}async function C(e,n){await c(300);const t=a.find(r=>r.id===parseInt(e));if(!t)throw new Error("Contract not found");return t.customerSignatory=n,t.customerSignedDate=new Date().toISOString(),t.updatedAt=new Date().toISOString(),t.vendorSignedDate&&(t.status="active"),o.fromAPI(t)}async function v(e,n){await c(300);const t=a.find(r=>r.id===parseInt(e));if(!t)throw new Error("Contract not found");return t.vendorSignatory=n,t.vendorSignedDate=new Date().toISOString(),t.updatedAt=new Date().toISOString(),t.customerSignedDate&&(t.status="active"),o.fromAPI(t)}async function D(e,n){await c(300);const t=a.find(i=>i.id===parseInt(e));if(!t)throw new Error("Contract not found");const r=t.endDate;return t.startDate=r,t.endDate=n||new Date(new Date(r).getTime()+t.renewalPeriod*30*24*60*60*1e3).toISOString().split("T")[0],t.status="active",t.updatedAt=new Date().toISOString(),o.fromAPI(t)}async function A(e,n){await c(300);const t=a.find(r=>r.id===parseInt(e));if(!t)throw new Error("Contract not found");return t.status="terminated",t.notes=`${t.notes}
Terminated: ${n}`,t.updatedAt=new Date().toISOString(),o.fromAPI(t)}async function h(e,n,t){await c(200);const r=a.find(i=>i.id===parseInt(e));if(!r)throw new Error("Contract not found");return r.ordersPlaced+=1,r.totalSpent+=t,r.lastOrderDate=new Date().toISOString().split("T")[0],r.updatedAt=new Date().toISOString(),o.fromAPI(r)}async function P(){return await c(200),{total:a.length,active:a.filter(e=>e.status==="active").length,pending:a.filter(e=>e.status==="pending").length,expiringSoon:a.filter(e=>o.fromAPI(e).isExpiringSoon).length,expired:a.filter(e=>e.status==="expired").length,totalValue:a.reduce((e,n)=>e+n.totalValue,0),totalCommitment:a.reduce((e,n)=>e+n.minimumCommitment,0),totalSpent:a.reduce((e,n)=>e+n.totalSpent,0),averageValue:a.length>0?a.reduce((e,n)=>e+n.totalValue,0)/a.length:0}}async function T(e=30){return await c(200),a.filter(t=>{if(t.status!=="active"||!t.endDate)return!1;const r=new Date(t.endDate),d=Math.ceil((r-new Date)/(1e3*60*60*24));return d<=e&&d>0}).map(t=>o.fromAPI(t))}const x={getContracts:u,getContractById:l,getContractByNumber:m,getContractsForCompany:p,getActiveContractForCompany:f,createContract:S,updateContract:w,deleteContract:y,approveContract:g,rejectContract:I,signContractCustomer:C,signContractVendor:v,renewContract:D,terminateContract:A,updateContractPerformance:h,getContractStats:P,getExpiringContracts:T};export{g as approveContract,S as createContract,x as default,y as deleteContract,f as getActiveContractForCompany,l as getContractById,m as getContractByNumber,P as getContractStats,u as getContracts,p as getContractsForCompany,T as getExpiringContracts,I as rejectContract,D as renewContract,C as signContractCustomer,v as signContractVendor,A as terminateContract,w as updateContract,h as updateContractPerformance};
