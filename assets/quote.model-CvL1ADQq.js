class e{constructor(t={}){this.id=t.id||null,this.quoteNumber=t.quoteNumber||"",this.type=t.type||"standard",this.companyId=t.companyId||null,this.companyName=t.companyName||"",this.contactId=t.contactId||null,this.contactName=t.contactName||"",this.contactEmail=t.contactEmail||"",this.contactPhone=t.contactPhone||"",this.status=t.status||"draft",this.title=t.title||"",this.description=t.description||"",this.items=t.items||[],this.subtotal=t.subtotal||0,this.discountAmount=t.discountAmount||0,this.discountPercent=t.discountPercent||0,this.taxAmount=t.taxAmount||0,this.shippingAmount=t.shippingAmount||0,this.total=t.total||0,this.currency=t.currency||"USD",this.paymentTerms=t.paymentTerms||"Net 30",this.deliveryTerms=t.deliveryTerms||"",this.validUntil=t.validUntil||null,this.termsAndConditions=t.termsAndConditions||"",this.notes=t.notes||"",this.shippingAddress=t.shippingAddress||null,this.shippingMethod=t.shippingMethod||"",this.estimatedDelivery=t.estimatedDelivery||null,this.requiresApproval=t.requiresApproval||!1,this.approvedBy=t.approvedBy||null,this.approvedAt=t.approvedAt||null,this.rejectionReason=t.rejectionReason||"",this.salesRepId=t.salesRepId||null,this.salesRepName=t.salesRepName||"",this.convertedToOrderId=t.convertedToOrderId||null,this.convertedAt=t.convertedAt||null,this.attachments=t.attachments||[],this.customFields=t.customFields||{},this.tags=t.tags||[],this.viewedAt=t.viewedAt||null,this.viewCount=t.viewCount||0,this.sentAt=t.sentAt||null,this.createdAt=t.createdAt||null,this.updatedAt=t.updatedAt||null,this.createdBy=t.createdBy||null}get isExpired(){return this.validUntil?new Date(this.validUntil)<new Date:!1}get isActive(){return["sent","viewed"].includes(this.status)&&!this.isExpired}get isConverted(){return this.status==="converted"&&this.convertedToOrderId!==null}get itemCount(){return this.items.reduce((t,i)=>t+i.quantity,0)}calculateTotals(){this.subtotal=this.items.reduce((i,s)=>i+s.quantity*s.unitPrice,0),this.discountPercent>0&&(this.discountAmount=this.subtotal*(this.discountPercent/100));const t=this.subtotal-this.discountAmount;this.taxAmount=t*.08,this.total=t+this.taxAmount+this.shippingAmount}addItem(t){this.items.push({productId:t.productId,sku:t.sku,name:t.name,description:t.description||"",quantity:t.quantity||1,unitPrice:t.unitPrice||0,discount:t.discount||0,tax:t.tax||0,total:(t.quantity||1)*(t.unitPrice||0)}),this.calculateTotals()}removeItem(t){this.items.splice(t,1),this.calculateTotals()}validate(){const t=[];return this.companyId||t.push("Company is required"),(!this.contactEmail||!this.isValidEmail(this.contactEmail))&&t.push("Valid contact email is required"),this.items.length===0&&t.push("At least one item is required"),this.validUntil&&new Date(this.validUntil)<=new Date&&t.push("Valid until date must be in the future"),{isValid:t.length===0,errors:t}}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}toJSON(){return{...this}}static fromAPI(t){return new e(t)}}export{e as Q};
